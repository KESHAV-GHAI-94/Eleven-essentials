<%- include('./partials/adminheader') %>

<div class="min-h-screen bg-gray-100 flex">

  <!-- SIDEBAR -->
  <aside class="w-64 bg-white shadow-lg p-6 hidden md:block">
    <h2 class="text-2xl font-bold text-blue-600 mb-8">
      Owner Panel
    </h2>

    <nav class="flex flex-col gap-2">
      <a href="/owners/products"
        class="px-4 py-3 rounded-lg bg-blue-50 text-blue-600 font-medium">
        ğŸ“¦ All Products
      </a>
      <a href="/owners/create"
        class="px-4 py-3 rounded-lg hover:bg-gray-100">
        â• Add Product
      </a>
      <a href="/owners/products"
        class="px-4 py-3 rounded-lg hover:bg-gray-100">
        ğŸ§¾ Orders
      </a>
      <a href="/owners/users"
        class="px-4 py-3 rounded-lg hover:bg-gray-100">
        ğŸ‘¥ Users
      </a>
      <a href="/owners/products"
        class="px-4 py-3 rounded-lg hover:bg-gray-100">
        ğŸ“Š Analytics
      </a>
    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="flex-1 p-8 pt-24">

    <!-- HEADER -->
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-3xl font-semibold text-gray-800">
        Manage Products
      </h1>

      <a href="/owners/create"
        class="px-6 py-3 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition">
        + Add Product
      </a>
    </div>

    <!-- PRODUCTS GRID -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      <% products.forEach(product => { %>
        <div class="bg-white rounded-xl shadow hover:shadow-xl transition overflow-hidden">

          <!-- IMAGE -->
          <div class="h-52 flex items-center justify-center bg-[<%= product.bgcolor %>]">
            <% if (product.images) { %>
              <img
                src="data:image/jpeg;base64,<%= product.images.toString('base64') %>"
                class="w-40 h-40 object-contain"
              />
            <% } else { %>
              <span class="text-sm text-gray-400">No Image</span>
            <% } %>
          </div>

          <!-- DETAILS -->
          <div class="p-4 bg-[<%= product.panelcolor %>] text-[<%= product.textcolor %>]">
            <h3 class="font-semibold text-lg">
              <%= product.name %>
            </h3>
            <p class="mt-1 font-medium">
              â‚¹ <%= product.price %>
            </p>

            <% if (product.discount > 0) { %>
              <span class="inline-block mt-2 text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">
                <%= product.discount %>% OFF
              </span>
            <% } %>
          </div>

          <!-- ACTIONS -->
          <div class="flex justify-between items-center px-4 py-3 border-t text-sm">
            <a
              href="/owners/products/edit/<%= product._id %>"
              class="text-blue-600 hover:underline"
            >
              âœï¸ Edit
            </a>

            <form
              action="/owners/products/delete/<%= product._id %>"
              method="POST"
              onsubmit="return confirm('Delete this product?')"
            >
              <button class="text-red-600 hover:underline">
                ğŸ—‘ï¸ Delete
              </button>
            </form>
          </div>

        </div>
      <% }) %>

    </div>

  </main>
</div>

<%- include('./partials/footer') %>
